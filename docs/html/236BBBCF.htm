<!DOCTYPE html ><html lang="en-US"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" href="../css/bulma.css" /><link rel="stylesheet" href="../css/font-awesome.min.css" /><link rel="stylesheet" href="../css/presentationStyle.css" /><link rel="stylesheet" href="../css/vs.min.css" /><script src="../scripts/jquery-3.5.1.min.js"></script><script src="../scripts/clipboard.min.js"></script><script src="../scripts/highlight.min.js"></script><script src="../scripts/presentationStyle.js"></script><title>CombinationOptimizationContext Class</title><meta name="Title" content="CombinationOptimizationContext" /><meta name="Help.Id" content="T:Novacta.Analytics.Advanced.CombinationOptimizationContext" /><meta name="Help.ContentType" content="Reference" /><meta name="container" content="Novacta.Analytics.Advanced" /><meta name="guid" content="236BBBCF" /><meta name="Description" content="Represents a Cross-Entropy context supporting the optimization of objective functions whose arguments are the combinations having the specified size available from a given set of items." /><meta name="tocFile" content="../toc/IDBE.xml" /></head><body><div class="fixedLayout"><div id="Header" class="fixedHeader"><div class="pageHeader level mb-0 py-2 px-4"><div id="TitleContainer" class="level-left"><div class="level-item"><img src="../icons/Help.png" /></div><div id="DocumentationTitle" class="level-item">Novacta.Analytics Documentation</div></div><div id="LangFilterSearchContainer" class="level-right"><div class="level-item"><div class="dropdown is-hoverable"><div class="dropdown-trigger"><button class="button" aria-haspopup="true" aria-controls="dropdown-menu"><span id="CurrentLanguage"></span><span class="icon is-small"><i class="fa fa-angle-down" aria-hidden="true"></i></span></button></div><div class="dropdown-menu" role="menu"><div id="LanguageSelections" class="dropdown-content"><a class="dropdown-item languageFilterItem" data-languageId="cs">C#</a><a class="dropdown-item languageFilterItem" data-languageId="vb">VB</a><a class="dropdown-item languageFilterItem" data-languageId="cpp">C++</a><a class="dropdown-item languageFilterItem" data-languageId="fs">F#</a></div></div></div></div><div class="level-item"><form id="SearchForm" action="#" onsubmit="TransferToSearchPage(); return false;"><div class="field"><div class="control has-icons-left"><input id="SearchTerms" class="input" type="text" maxlength="200" placeholder="Search" /><span class="icon is-small is-left"><i class="fa fa-search"></i></span><button id="SearchButton" type="submit" class="is-hidden"></button></div></div></form></div></div></div></div><div class="fixedContent"><nav class="breadcrumb my-1 px-2 border-bottom" role="navigation"><ul id="TopicBreadcrumbs" /></nav><div id="ContentContainer" class="columns pl-5 pr-5 fixedContent"><div id="ShowHideTOCColumn" class="column is-hidden-tablet"><a id="ShowHideTOC">Show/Hide TOC</a></div><div id="TOCColumn" class="column is-hidden-mobile"><nav class="toc"><ul id="TableOfContents" class="toc-menu" /></nav></div><div id="Resizer" class="is-hidden"></div><div id="TopicContent" class="column content is-7"><h1>Combination<wbr />Optimization<wbr />Context Class</h1><div class="summary">
            Represents a Cross-Entropy context supporting
            the optimization of objective functions whose
            arguments are the combinations having the specified
            size available from a given set of items.
            </div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>Definition</h2><div id="IDBSection"><strong>Namespace:</strong> <a href="F249DE1E.htm">Novacta.Analytics.Advanced</a><br /><strong>Assembly:</strong> Novacta.Analytics (in Novacta.Analytics.dll) Version: 2.1.0+428f3840cfab98dda567bb0ed350b302533e273a<div class="codeSnippet" data-codeSnippetLanguage="cs"><div class="codeHeader"><span class="codeHeaderTitle">C#</span><span class="buttons"><button class="button is-small is-light copyCode" title="Copy"><span class="icon is-small"><i class="fa fa-copy"></i></span><span>Copy</span></button></span></div><div class="codePanel hljs"><pre xml:space="preserve"><code class="language-cs"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="identifier">CombinationOptimizationContext</span> : <span class="identifier">SystemPerformanceOptimizationContext</span></code></pre></div></div><div class="codeSnippet is-hidden" data-codeSnippetLanguage="vb"><div class="codeHeader"><span class="codeHeaderTitle">VB</span><span class="buttons"><button class="button is-small is-light copyCode" title="Copy"><span class="icon is-small"><i class="fa fa-copy"></i></span><span>Copy</span></button></span></div><div class="codePanel hljs"><pre xml:space="preserve"><code class="language-vb"><span class="keyword">Public</span> <span class="keyword">NotInheritable</span> <span class="keyword">Class</span> <span class="identifier">CombinationOptimizationContext</span>
	<span class="keyword">Inherits</span> <span class="identifier">SystemPerformanceOptimizationContext</span></code></pre></div></div><div class="codeSnippet is-hidden" data-codeSnippetLanguage="cpp"><div class="codeHeader"><span class="codeHeaderTitle">C++</span><span class="buttons"><button class="button is-small is-light copyCode" title="Copy"><span class="icon is-small"><i class="fa fa-copy"></i></span><span>Copy</span></button></span></div><div class="codePanel hljs"><pre xml:space="preserve"><code class="language-cpp"><span class="keyword">public</span> <span class="keyword">ref class</span> <span class="identifier">CombinationOptimizationContext</span> <span class="keyword">sealed</span> : <span class="keyword">public</span> <span class="identifier">SystemPerformanceOptimizationContext</span></code></pre></div></div><div class="codeSnippet is-hidden" data-codeSnippetLanguage="fs"><div class="codeHeader"><span class="codeHeaderTitle">F#</span><span class="buttons"><button class="button is-small is-light copyCode" title="Copy"><span class="icon is-small"><i class="fa fa-copy"></i></span><span>Copy</span></button></span></div><div class="codePanel hljs"><pre xml:space="preserve"><code class="language-fs">[&lt;<span class="identifier">SealedAttribute</span>&gt;]
<span class="keyword">type</span> <span class="identifier">CombinationOptimizationContext</span> = 
    <span class="keyword">class</span>
        <span class="keyword">inherit</span> <span class="identifier">SystemPerformanceOptimizationContext</span>
    <span class="keyword">end</span></code></pre></div></div><dl class="inheritanceHierarchy"><dt>Inheritance</dt><dd><a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>  <span class="icon is-small"><i class="fa fa-arrow-right"></i></span>  <a href="F04A1B18.htm">CrossEntropyContext</a>  <span class="icon is-small"><i class="fa fa-arrow-right"></i></span>  <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>  <span class="icon is-small"><i class="fa fa-arrow-right"></i></span>  <span class="selflink">CombinationOptimizationContext</span></dd></dl></div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>Remarks</h2><div id="IDBCSection"><p>
            Class <span class="selflink">CombinationOptimizationContext</span> derives from
            <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>, and defines
            a Cross-Entropy context able to solve combinatorial optimization
            problems regarding the selection of fixed size subsets from
            a collection of items.
            </p><p>
            Class <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a> thoroughly 
            defines a system whose performance must be optimized. 
            Class <span class="selflink">CombinationOptimizationContext</span> specializes 
            that system by assuming that its performance,
            say <img alt="LaTeX equation" src="../media/latex_9194.svg" />, is defined on the set of combinations, 
            having the specified size, available from 
            a given collection of items.
            </p><p>
            The system's state-space 
            <img alt="LaTeX equation" src="../media/latex_9195.svg" />, i.e. the domain of 
            <img alt="LaTeX equation" src="../media/latex_9196.svg" />, can thus be represented as the Cartesian 
            product of 
            <img alt="LaTeX equation" src="../media/latex_9197.svg" /> copies of the set 
            <img alt="LaTeX equation" src="../media/latex_9198.svg" style="vertical-align: -4px" />, where <img alt="LaTeX equation" src="../media/latex_9199.svg" /> is the 
            number of available items. An argument
            <img alt="LaTeX equation" src="../media/latex_9200.svg" style="vertical-align: -4px" /> defines a combination 
            by signaling that the <img alt="LaTeX equation" src="../media/latex_9201.svg" style="vertical-align: -4px" />-th item is included in
            the combination
            if <img alt="LaTeX equation" src="../media/latex_9202.svg" style="vertical-align: -5px" />, otherwise setting <img alt="LaTeX equation" src="../media/latex_9203.svg" style="vertical-align: -5px" />.
            </p><p>
            If the combinations under study have fixed size equal to
            <img alt="LaTeX equation" src="../media/latex_9204.svg" />, then each argument will have exactly
            <img alt="LaTeX equation" src="../media/latex_9205.svg" /> nonzero entries.
            </p><p>
            A Cross-Entropy optimizer is designed to identify the 
            optimal arguments at which the performance function of a
            complex system reaches
            its minimum or maximum value.
            To get the optimal state, the system's state-space 
            <img alt="LaTeX equation" src="../media/latex_9206.svg" />, i.e. the domain of 
            <img alt="LaTeX equation" src="../media/latex_9207.svg" />, is traversed iteratively 
            by sampling, at each iteration, from 
            a specific density function, member of a parametric 
            family  
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9208.svg" /><br /><br />
            where <img alt="LaTeX equation" src="../media/latex_9209.svg" style="vertical-align: -1px" /> is 
            a possible argument of <img alt="LaTeX equation" src="../media/latex_9210.svg" />, 
            and <img alt="LaTeX equation" src="../media/latex_9211.svg" style="vertical-align: -1px" /> is the set of 
            allowable values for parameter <img alt="LaTeX equation" src="../media/latex_9212.svg" />.
            The parameter exploited at a given iteration <img alt="LaTeX equation" src="../media/latex_9213.svg" />
            is referred to
            as the <i>reference</i> parameter of such iteration and indicated
            as <img alt="LaTeX equation" src="../media/latex_9214.svg" style="vertical-align: -2px" />.
            A minimum number
            of iterations, say <img alt="LaTeX equation" src="../media/latex_9215.svg" />, must be executed, while a 
            number of them up to a maximum, say <img alt="LaTeX equation" src="../media/latex_9216.svg" />, is allowed.
            </p><p><b>Implementing a context for optimizing on combinations</b></p><p>
            The Cross-Entropy method 
            provides an iterative multi step procedure. In the context
            of combinatorial optimization, at each 
            iteration <img alt="LaTeX equation" src="../media/latex_9217.svg" /> a <i>sampling step</i>
            is executed in order to generate diverse candidate arguments of 
            the objective function, sampled from a distribution 
            characterized by the <i>reference parameter</i> of the iteration,
            say <img alt="LaTeX equation" src="../media/latex_9218.svg" style="vertical-align: -2px" />. 
            Such sample is thus exploited in the <i>updating step</i> in which 
            a new <i>reference</i> 
            parameter <img alt="LaTeX equation" src="../media/latex_9219.svg" style="vertical-align: -2px" /> is 
            identified to modify the distribution from which the samples 
            will be obtained in the next iteration: such modification is
            executed in order to improve 
            the probability of sampling relevant arguments, i.e. those 
            arguments corresponding to the function values of interest
            (See the documentation of 
            class <a href="298402DD.htm">CrossEntropyProgram</a> for a 
            thorough discussion of the Cross-Entropy method). 
            </p><p>
            When the Cross-Entropy method is applied in an optimization
            context, a final <i>optimizing step</i> is executed, in which 
            the argument corresponding to the searched extremum  
            is effectively identified.
            </p><p>These steps have been implemented as follows.</p><p><b><i>Sampling step</i></b></p><p>
            In a <span class="selflink">CombinationOptimizationContext</span>, the parametric 
            family <img alt="LaTeX equation" src="../media/latex_9220.svg" style="vertical-align: -1px" /> is outlined as follows.
            Each component <img alt="LaTeX equation" src="../media/latex_9221.svg" style="vertical-align: -5px" /> of an argument
            <img alt="LaTeX equation" src="../media/latex_9222.svg" style="vertical-align: -4px" /> of <img alt="LaTeX equation" src="../media/latex_9223.svg" />
            is attached to a independent
            Bernoulli distribution having parameter <img alt="LaTeX equation" src="../media/latex_9224.svg" style="vertical-align: -5px" />,
            and <img alt="LaTeX equation" src="../media/latex_9225.svg" style="vertical-align: -4px" /> is defined as the distribution of the sum 
            of the corresponding Bernoulli trials, conditional to having 
            exactly <img alt="LaTeX equation" src="../media/latex_9226.svg" /> successes.
            The Cross-Entropy sampling parameter <img alt="LaTeX equation" src="../media/latex_9227.svg" />
            can thus be  
            represented as the <img alt="LaTeX equation" src="../media/latex_9228.svg" /> vector
            <img alt="LaTeX equation" src="../media/latex_9229.svg" style="vertical-align: -6px" />.
            </p><p>
            The parametric space <img alt="LaTeX equation" src="../media/latex_9230.svg" style="vertical-align: -1px" /> should 
            include a parameter under which all possible states must have 
            a real chance of being selected: this parameter
            is specified as the initial <i>reference</i> parameter
            <img alt="LaTeX equation" src="../media/latex_9231.svg" style="vertical-align: -2px" />.
            A <span class="selflink">CombinationOptimizationContext</span> defines 
            <img alt="LaTeX equation" src="../media/latex_9232.svg" style="vertical-align: -2px" /> as a constant vector whose entries are all
            equal to <img alt="LaTeX equation" src="../media/latex_9233.svg" />. 
            </p><p><b><i>Updating step</i></b></p><p>
            At iteration <img alt="LaTeX equation" src="../media/latex_9234.svg" />, let us represent the sample drawn 
            as <img alt="LaTeX equation" src="../media/latex_9235.svg" style="vertical-align: -5px" />, where <img alt="LaTeX equation" src="../media/latex_9236.svg" /> is the 
            Cross-Entropy sample size, and the <img alt="LaTeX equation" src="../media/latex_9237.svg" />-th sample point
            is the sequence <img alt="LaTeX equation" src="../media/latex_9238.svg" style="vertical-align: -5px" />.
            The parameter's 
            updating formula is, 
            for <img alt="LaTeX equation" src="../media/latex_9239.svg" style="vertical-align: -4px" />,
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9240.svg" /><br /><br />
            where <img alt="LaTeX equation" src="../media/latex_9241.svg" style="vertical-align: -2px" />
            is the elite sample in this context, i.e. the set of sample
            points having the lowest performances observed during the <img alt="LaTeX equation" src="../media/latex_9242.svg" />-th
            iteration, if minimizing, the highest ones, otherwise, while
            <img alt="LaTeX equation" src="../media/latex_9243.svg" style="vertical-align: -4px" /> is its indicator function.
            </p><p><i>Applying a smoothing scheme to updated parameters</i></p><p>
            In a <span class="selflink">CombinationOptimizationContext</span>, 
            the sampling parameter 
            is smoothed applying the following formula
            (See Rubinstein and Kroese, 
            Remark 5.2, p. 189<sup class="citation"><a href="#cite1">[1]</a></sup>):
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9244.svg" /><br /><br />
            where <img alt="LaTeX equation" src="../media/latex_9245.svg" style="vertical-align: -1px" />.
            </p><p><b><i>Optimizing step</i></b></p><p>
            The optimizing step is executed after that the underlying 
            Cross-Entropy program 
            has converged. 
            In a specified context, it is expected that, 
            given a reference parameter 
            <img alt="LaTeX equation" src="../media/latex_9246.svg" />, a corresponding reasonable value could be 
            guessed for the optimizing argument of <img alt="LaTeX equation" src="../media/latex_9247.svg" />, 
            say <img alt="LaTeX equation" src="../media/latex_9248.svg" style="vertical-align: -4px" />, with <img alt="LaTeX equation" src="../media/latex_9249.svg" /> a function
            from <img alt="LaTeX equation" src="../media/latex_9250.svg" style="vertical-align: -1px" /> to <img alt="LaTeX equation" src="../media/latex_9251.svg" />. 
            Function <img alt="LaTeX equation" src="../media/latex_9252.svg" /> is defined by overriding method 
            <a href="8571586F.htm">GetOptimalState(DoubleMatrix)</a> 
            that should return <img alt="LaTeX equation" src="../media/latex_9253.svg" style="vertical-align: -4px" />
            given a specific reference parameter <img alt="LaTeX equation" src="../media/latex_9254.svg" />.
            </p><p>
            Given the optimal parameter (the parameter corresponding to the 
            last iteration <img alt="LaTeX equation" src="../media/latex_9255.svg" /> executed by the algorithm before 
            stopping),
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9256.svg" /><br /><br />
            the argument at which the searched extremum is considered 
            as reached according to the Cross-Entropy method will be
            returned as follows.
            The probabilities <img alt="LaTeX equation" src="../media/latex_9257.svg" style="vertical-align: -5px" /> are sorted in increasing order, 
            say obtaining the 
            following ordering:
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9258.svg" /><br /><br />
            and the corresponding sequence of indexes
            <img alt="LaTeX equation" src="../media/latex_9259.svg" style="vertical-align: -5px" />
            such that
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9260.svg" /><br /><br />
            is taken into account by defining the set 
            <img alt="LaTeX equation" src="../media/latex_9261.svg" style="vertical-align: -5px" />
            and returning
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9262.svg" /><br /><br />
            where 
            <img alt="LaTeX equation" src="../media/latex_9263.svg" style="vertical-align: -5px" /> is one if <img alt="LaTeX equation" src="../media/latex_9264.svg" style="vertical-align: -4px" />;
            zero otherwise.
            This is equivalent to include in the optimal combination
            those items having the greatest <img alt="LaTeX equation" src="../media/latex_9265.svg" /> probabilities in 
            parameter <img alt="LaTeX equation" src="../media/latex_9266.svg" style="vertical-align: -2px" />.
            </p><p><b><i>Stopping criterion</i></b></p><p>
            A <span class="selflink">CombinationOptimizationContext</span> never stops before
            executing a number of iterations less than 
            <a href="44E3AF08.htm">MinimumNumberOfIterations</a>, and always stops
            if such number is greater than or equal to
            <a href="CB60FB7E.htm">MaximumNumberOfIterations</a>. 
            </p><p>
            For intermediate iterations, method <a href="658E4A0.htm">StopAtIntermediateIteration(Int32, LinkedList<span id="LST236BBBCF_0" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>Double<span id="LST236BBBCF_1" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>, LinkedList<span id="LST236BBBCF_2" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>DoubleMatrix<span id="LST236BBBCF_3" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>)</a> is
            called to check if a Cross-Entropy program executing in this
            context should stop or not.
            </p><p>
            In a <span class="selflink">CombinationOptimizationContext</span>, the method 
            analyzes the currently updated reference parameter, 
            say <img alt="LaTeX equation" src="../media/latex_9267.svg" style="vertical-align: -6px" /> as follows. 
            If condition
            <br /><br /><img alt="LaTeX equation" src="../media/latex_9268.svg" /><br /><br />
            can be verified,
            the method returns <span class="code">true</span>; otherwise <span class="code">false</span> is returned.
            Equivalently, the algorithm converges if the indexes of 
            the largest <img alt="LaTeX equation" src="../media/latex_9269.svg" /> probabilities coincide
            <img alt="LaTeX equation" src="../media/latex_9270.svg" /> times in a row of iterations.
            </p><p><b>Instantiating a context for optimizing on combinations</b></p><p>
            At instantiation, the constructor of 
            a <span class="selflink">CombinationOptimizationContext</span> object
            will receive information about the optimization under study by
            means of parameters representing the objective function
            <img alt="LaTeX equation" src="../media/latex_9271.svg" />, the combination constants
            <img alt="LaTeX equation" src="../media/latex_9272.svg" /> and
            <img alt="LaTeX equation" src="../media/latex_9273.svg" />, the extremes of the allowed range of
            intermediate iterations,
            <img alt="LaTeX equation" src="../media/latex_9274.svg" /> and <img alt="LaTeX equation" src="../media/latex_9275.svg" />, and a constant stating 
            if the optimization goal is a maximization or a minimization.
            In addition, the smoothing parameter <img alt="LaTeX equation" src="../media/latex_9276.svg" />
            is also 
            passed to the constructor.
            </p><p>
            After construction, <img alt="LaTeX equation" src="../media/latex_9277.svg" />
            and <img alt="LaTeX equation" src="../media/latex_9278.svg" />
            can be inspected, respectively, via properties
            <a href="44E3AF08.htm">MinimumNumberOfIterations</a> and
            <a href="CB60FB7E.htm">MaximumNumberOfIterations</a>. 
            The smoothing coefficient <img alt="LaTeX equation" src="../media/latex_9279.svg" /> is also
            available via property
            <a href="C1880C30.htm">ProbabilitySmoothingCoefficient</a>.
            Combination constants <img alt="LaTeX equation" src="../media/latex_9280.svg" /> and <img alt="LaTeX equation" src="../media/latex_9281.svg" /> are returned by 
            <a href="6BFCB280.htm">StateDimension</a> and
            <a href="49E242C9.htm">CombinationDimension</a>, respectively.
            In addition, 
            property 
            <a href="847A8F0F.htm">OptimizationGoal</a> 
            signals that the performance function
            must be maximized if it 
            evaluates to the constant <a href="D5F83433.htm">Maximization</a>, or 
            that a minimization is requested
            if it evaluates to
            the constant <a href="D5F83433.htm">Minimization</a>.
            </p><p>
            To evaluate the objective function <img alt="LaTeX equation" src="../media/latex_9282.svg" /> at a
            specific argument, one can call method
            <a href="1AF89526.htm">Performance(DoubleMatrix)</a>
            passing the argument as a parameter.
            It is expected that the objective function 
            will accept a row 
            vector having binary entries as a valid representation of an argument.
            </p></div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>Example</h2><div id="IDCCSection"><p>
            In the following example, an existing partition of twelve items is explained
            by selecting two features out of the seven ones available in 
            an artificial data set regarding the items under study.
            </p><p>
            The selection criterion is defined as the maximization
            of the Dunn Index in the domain of selectable sub data sets.
            </p><p><div class="codeSnippet"><div class="codeHeader"><span class="codeHeaderTitle">Selecting features from a data set to explain a given partition by Dunn Index maximization.</span><button class="button is-small is-light copyCode" title="Copy"><span class="icon is-small"><i class="fa fa-copy"></i></span><span>Copy</span></button></div><div class="codePanel hljs"><pre xml:space="preserve"><code class="language-cs">using System;
using Novacta.Analytics.Advanced;

namespace Novacta.Analytics.CodeExamples.Advanced
{
    public class CombinationOptimizationContextExample0  
    {
        public void Main()
        {
            // Set the number of items and features under study.
            const int numberOfItems = 12;
            int numberOfFeatures = 7;

            // Define a partition that must be explained.
            // Three parts (clusters) are included,
            // containing, respectively, items 0 to 3,
            // 4 to 7, and 8 to 11.
            var partition = IndexPartition.Create(
                new double[numberOfItems]
                    { 0 ,0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2 });

            // Create a matrix that will represent
            // an artificial data set,
            // having 12 items (rows) and 7 features (columns).
            // This will store the observations which
            // explanation will be based on.
            var data = DoubleMatrix.Dense(
                numberOfRows: numberOfItems,
                numberOfColumns: numberOfFeatures);

            // The first 5 features are built to be almost
            // surely non informative, since they result
            // as samples drawn from a same distribution.
            var g = new GaussianDistribution(mu: 0, sigma: .01);
            for (int j = 0; j &lt; 5; j++)
            {
                data[":", j] = g.Sample(sampleSize: numberOfItems);
            }

            // Features 5 to 6 are instead built to be informative,
            // since they are sampled from different distributions
            // while filling rows whose indexes are in different parts
            // of the partition to be explained.
            var partIdentifiers = partition.Identifiers;
            double mu = 1.0;
            for (int i = 0; i &lt; partIdentifiers.Count; i++)
            {
                var part = partition[partIdentifiers[i]];
                int partSize = part.Count;
                g.Mu = mu;
                data[part, 5] = g.Sample(sampleSize: partSize);
                mu += 2.0;
                g.Mu = mu;
                data[part, 6] = g.Sample(sampleSize: partSize);
                mu += 2.0;
            }

            Console.WriteLine("The data set:");
            Console.WriteLine(data);

            // Define the selection problem as
            // the maximization of the Dunn Index.
            double objectiveFunction(DoubleMatrix x)
            {
                // An argument x has entries equal to one,
                // signaling that the corresponding features 
                // are selected at x. Otherwise, the entries
                // are zero.
                IndexCollection selected = x.FindNonzero();

                double performance =
                    IndexPartition.DunnIndex(
                        data: data[":", selected],
                        partition: partition);

                return performance;
            }

            var optimizationGoal = OptimizationGoal.Maximization;

            // Define how many features must be selected
            // for explanation.
            int numberOfExplanatoryFeatures = 2;

            // Create the required context.
            var context = new CombinationOptimizationContext(
                objectiveFunction: objectiveFunction,
                stateDimension: numberOfFeatures,
                combinationDimension: numberOfExplanatoryFeatures,
                probabilitySmoothingCoefficient: .8,
                optimizationGoal: optimizationGoal,
                minimumNumberOfIterations: 3,
                maximumNumberOfIterations: 1000);

            // Create the optimizer.
            var optimizer = new SystemPerformanceOptimizer()
            {
                PerformanceEvaluationParallelOptions = { MaxDegreeOfParallelism = -1 },
                SampleGenerationParallelOptions = { MaxDegreeOfParallelism = -1 }
            };

            // Set optimization parameters.
            double rarity = 0.01;
            int sampleSize = 1000;

            // Solve the problem.
            var results = optimizer.Optimize(
                context,
                rarity,
                sampleSize);

            IndexCollection optimalExplanatoryFeatureIndexes =
                results.OptimalState.FindNonzero();

            // Show the results.
            Console.WriteLine(
                "The Cross-Entropy optimizer has converged: {0}.",
                results.HasConverged);

            Console.WriteLine();
            Console.WriteLine("Initial guess parameter:");
            Console.WriteLine(context.InitialParameter);

            Console.WriteLine();
            Console.WriteLine("The maximizer of the performance is:");
            Console.WriteLine(results.OptimalState);

            Console.WriteLine();
            Console.WriteLine(
                "The {0} features best explaining the given partition have column indexes:",
                numberOfExplanatoryFeatures);
            Console.WriteLine(optimalExplanatoryFeatureIndexes);

            Console.WriteLine();
            Console.WriteLine("The maximum performance is:");
            Console.WriteLine(results.OptimalPerformance);

            Console.WriteLine();
            Console.WriteLine("This is the Dunn Index for the selected features:");
            var di = IndexPartition.DunnIndex(
                data[":", optimalExplanatoryFeatureIndexes],
                partition);
            Console.WriteLine(di);
        }
    }
}

// Executing method Main() produces the following output:
// 
// The data set:
// 0.00443412894    0.00269053161    0.00413587909    -0.00765022956   -0.0051623096    1.00663787       3.01053155       
// -0.0020667716    0.0208840726     -0.00323082939   -0.00939014629   0.00144991289    0.999318094      3.01264231       
// 0.0115714824     0.00980880506    0.0049017337     0.0032788575     0.0157818958     0.990821676      3.01207396       
// -0.0156854206    -0.00757566325   -0.00972832587   -0.00217925896   0.0107421303     0.992541729      2.99695621       
// 0.00220674309    -0.00321077807   -0.00611898588   0.00720305795    0.0128767272     4.99440474       6.99892958       
// -0.00637438186   0.0050524291     -0.00409270388   0.00210944391    -0.0152463979    4.9974367        6.99460151       
// -0.00662648189   -0.0149292848    0.00236975764    0.0103282088     -0.0108846478    4.99249371       6.98860335       
// -0.0219354055    0.0122820889     0.0109569101     -0.0108910035    0.00275269082    5.02268395       6.99732006       
// -0.00172760644   0.000890969086   -0.0121749938    -0.0060896535    -0.0125774475    9.00956698       10.9938497       
// 0.0157657881     0.0084084921     0.00295384059    -0.00358519595   0.00447359708    8.98856241       11.0013196       
// 0.0129253424     -0.000948574239  0.00235032211    -0.0135124599    -0.0233090879    9.00738398       10.9891406       
// -0.0084813634    -0.00459883432   -0.0148632861    0.0223964957     -0.00259506386   9.00721897       11.005672        
// 
// 
// The Cross-Entropy optimizer has converged: True.
// 
// Initial guess parameter:
// 0.5              0.5              0.5              0.5              0.5              0.5              0.5              
// 
// 
// 
// The maximizer of the performance is:
// 0                0                0                0                0                1                1                
// 
// 
// 
// The 2 features best explaining the given partition have column indexes:
// 5, 6
// 
// The maximum performance is:
// 179.2086690301557
// 
// This is the Dunn Index for the selected features:
// 179.2086690301557</code></pre></div></div></p></div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>Constructors</h2><div id="IDAEASection"><table id="ConstructorList" class="table is-hoverable"><tr><td><a href="F296C4DC.htm">CombinationOptimizationContext</a></td><td>
            Initializes a new instance of the 
            <span class="selflink">CombinationOptimizationContext</span> class 
            aimed to optimize the specified 
            objective function,
            with the given optimization goal, 
            range of iterations, and probability smoothing coefficient.
            </td></tr></table></div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>Properties</h2><div id="IDQEASection"><table id="PropertyList" class="table is-hoverable"><tr><td><a href="49E242C9.htm">CombinationDimension</a></td><td>
            Gets the dimension of a combination represented by a 
            system's state
            when 
            a <a href="298402DD.htm">CrossEntropyProgram</a> executes in this
            context.
            </td></tr><tr><td><a href="66F284A1.htm">EliteSampleDefinition</a></td><td>
            Gets the elite sample definition for this context.
            <br />(Inherited from <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>)</td></tr><tr><td><a href="1FE43CBC.htm">InitialParameter</a></td><td>
            Gets the parameter initially exploited to sample from 
            the state-space of the system defined by this context.
            <br />(Inherited from <a href="F04A1B18.htm">CrossEntropyContext</a>)</td></tr><tr><td><a href="CB60FB7E.htm">MaximumNumberOfIterations</a></td><td>
            Gets the maximum number of iterations 
            allowed by this context. 
            <br />(Inherited from <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>)</td></tr><tr><td><a href="44E3AF08.htm">MinimumNumberOfIterations</a></td><td>
            Gets the minimum number of iterations 
            required by this context.
            <br />(Inherited from <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>)</td></tr><tr><td><a href="847A8F0F.htm">OptimizationGoal</a></td><td>
            Gets a constant specifying if the performance function 
            in this context must be minimized or maximized.
            <br />(Inherited from <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>)</td></tr><tr><td><a href="C1880C30.htm">ProbabilitySmoothingCoefficient</a></td><td>
            Gets the coefficient that defines the smoothing scheme 
            for the probabilities of the Cross-Entropy parameters 
            exploited by this context.
            </td></tr><tr><td><a href="6BFCB280.htm">StateDimension</a></td><td>
            Gets or sets the dimension of a vector representing a 
            system's state
            when 
            a <a href="298402DD.htm">CrossEntropyProgram</a> executes in this
            context.
            <br />(Inherited from <a href="F04A1B18.htm">CrossEntropyContext</a>)</td></tr><tr><td><a href="876F94ED.htm">TraceExecution</a></td><td>
            Gets or sets a value indicating whether the 
            execution of this context must be traced.
            <br />(Inherited from <a href="F04A1B18.htm">CrossEntropyContext</a>)</td></tr></table></div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>Methods</h2><div id="IDBEASection"><table id="MethodList" class="table is-hoverable"><tr><td><a href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)" target="_blank" rel="noopener noreferrer">Equals</a></td><td>Determines whether the specified object is equal to the current object.<br />(Inherited from <a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>)</td></tr><tr><td><a href="https://learn.microsoft.com/dotnet/api/system.object.finalize" target="_blank" rel="noopener noreferrer">Finalize</a></td><td>Allows an object to try to free resources and perform other cleanup operations before it is reclaimed by garbage collection.<br />(Inherited from <a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>)</td></tr><tr><td><a href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode" target="_blank" rel="noopener noreferrer">GetHashCode</a></td><td>Serves as the default hash function.<br />(Inherited from <a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>)</td></tr><tr><td><a href="8571586F.htm">GetOptimalState</a></td><td>
            Gets the argument that optimizes the objective function
            in this context, according to the specified 
            Cross-Entropy sampling parameter.
            <br />(Overrides <a href="9B360782.htm">SystemPerformanceOptimizationContext<span id="LST236BBBCF_4" data-languageSpecificText="cs=.|vb=.|cpp=::|nu=.|fs=."></span>GetOptimalState(DoubleMatrix)</a>)</td></tr><tr><td><a href="https://learn.microsoft.com/dotnet/api/system.object.gettype" target="_blank" rel="noopener noreferrer">GetType</a></td><td>Gets the <a href="https://learn.microsoft.com/dotnet/api/system.type" target="_blank" rel="noopener noreferrer">Type</a> of the current instance.<br />(Inherited from <a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>)</td></tr><tr><td><a href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone" target="_blank" rel="noopener noreferrer">MemberwiseClone</a></td><td>Creates a shallow copy of the current <a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>.<br />(Inherited from <a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>)</td></tr><tr><td><a href="E992D186.htm">OnExecutedIteration</a></td><td>
            Called after completion of each iteration of 
            a <a href="298402DD.htm">CrossEntropyProgram</a> executing in this
            context.
            <br />(Overrides <a href="E2DFB2BB.htm">SystemPerformanceOptimizationContext<span id="LST236BBBCF_5" data-languageSpecificText="cs=.|vb=.|cpp=::|nu=.|fs=."></span>OnExecutedIteration(Int32, DoubleMatrix, LinkedList<span id="LST236BBBCF_6" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>Double<span id="LST236BBBCF_7" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>, LinkedList<span id="LST236BBBCF_8" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>DoubleMatrix<span id="LST236BBBCF_9" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>)</a>)</td></tr><tr><td><a href="6D76F6BC.htm">PartialSample</a></td><td>
            Draws the specified subset of a sample from a distribution 
            characterized by the given parameter, using the stated
            random number generator. Used when executing the sampling
            step of a  <a href="298402DD.htm">CrossEntropyProgram</a> running
            in this context.
            <br />(Overrides <a href="6D600898.htm">CrossEntropyContext<span id="LST236BBBCF_10" data-languageSpecificText="cs=.|vb=.|cpp=::|nu=.|fs=."></span>PartialSample(<span id="LST236BBBCF_11" data-languageSpecificText="cpp=array&lt;"></span>Double<span id="LST236BBBCF_12" data-languageSpecificText="cpp=&gt;|cs=[]|vb=()|nu=[]|fs=[]"></span>, Tuple<span id="LST236BBBCF_13" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>Int32, Int32<span id="LST236BBBCF_14" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>, RandomNumberGenerator, DoubleMatrix, Int32)</a>)</td></tr><tr><td><a href="64A89E68.htm">Performance</a></td><td>
            Computes the objective function at a specified argument
            as the performance defined in this context.
            <br />(Overrides <a href="1AF89526.htm">CrossEntropyContext<span id="LST236BBBCF_15" data-languageSpecificText="cs=.|vb=.|cpp=::|nu=.|fs=."></span>Performance(DoubleMatrix)</a>)</td></tr><tr><td><a href="8094F2FA.htm">SmoothParameter</a></td><td>
            Provides the smoothing of the updated sampling parameter
            of a <a href="E252E84.htm">SystemPerformanceOptimizer</a>  
            executing in this context.        
            <br />(Overrides <a href="DB205520.htm">SystemPerformanceOptimizationContext<span id="LST236BBBCF_16" data-languageSpecificText="cs=.|vb=.|cpp=::|nu=.|fs=."></span>SmoothParameter(LinkedList<span id="LST236BBBCF_17" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>DoubleMatrix<span id="LST236BBBCF_18" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>)</a>)</td></tr><tr><td><a href="658E4A0.htm">StopAtIntermediateIteration</a></td><td>
            Specifies conditions 
            under which 
            a <a href="E252E84.htm">SystemPerformanceOptimizer</a> executing in 
            this context should be considered as terminated after
            completing an intermediate iteration.
            <br />(Overrides <a href="F068CBEA.htm">SystemPerformanceOptimizationContext<span id="LST236BBBCF_19" data-languageSpecificText="cs=.|vb=.|cpp=::|nu=.|fs=."></span>StopAtIntermediateIteration(Int32, LinkedList<span id="LST236BBBCF_20" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>Double<span id="LST236BBBCF_21" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>, LinkedList<span id="LST236BBBCF_22" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>DoubleMatrix<span id="LST236BBBCF_23" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>)</a>)</td></tr><tr><td><a href="94DC9B0B.htm">StopExecution</a></td><td>
            Specifies conditions 
            under which 
            a <a href="298402DD.htm">CrossEntropyProgram</a> executing in this 
            context should be considered 
            as terminated.
            <br />(Inherited from <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>)</td></tr><tr><td><a href="https://learn.microsoft.com/dotnet/api/system.object.tostring" target="_blank" rel="noopener noreferrer">ToString</a></td><td>Returns a string that represents the current object.<br />(Inherited from <a href="https://learn.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">Object</a>)</td></tr><tr><td><a href="CD947DDD.htm">UpdateLevel</a></td><td>
            Updates the performance level for the current iteration 
            of a  <a href="298402DD.htm">CrossEntropyProgram</a> executing in
            this context
            and determines the corresponding elite sample.
            <br />(Inherited from <a href="1C32368C.htm">SystemPerformanceOptimizationContext</a>)</td></tr><tr><td><a href="7A4A61E.htm">UpdateParameter</a></td><td>
            Updates the 
            sampling parameter attending the generation 
            of the sample in the next iteration of a 
             <a href="298402DD.htm">CrossEntropyProgram</a> executing in 
             this context.
            <br />(Overrides <a href="4AE2243.htm">CrossEntropyContext<span id="LST236BBBCF_24" data-languageSpecificText="cs=.|vb=.|cpp=::|nu=.|fs=."></span>UpdateParameter(LinkedList<span id="LST236BBBCF_25" data-languageSpecificText="cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=("></span>DoubleMatrix<span id="LST236BBBCF_26" data-languageSpecificText="cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)"></span>, DoubleMatrix)</a>)</td></tr></table></div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>Bibliography</h2><div id="IDDPBCSection"><div><span id="cite1">[1] </span><span class="bibliographyAuthor">Rubinstein, R.Y. and Kroese, D.P.</span>, <span class="bibliographyTitle">The Cross-Entropy Method, A unified Approach to Combinatorial Optimization, Monte-Carlo Simulation, and Machine Learning</span>, <span class="bibliographyPublisher">Springer, New York. (2004)</span></div></div><h2 class="quickLinkHeader"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>See Also</h2><div id="seeAlsoSection"><h4 class="quickLinkHeader">Reference</h4><div><a href="F249DE1E.htm">Novacta.Analytics.Advanced Namespace</a></div><h4 class="quickLinkHeader">Other Resources</h4><div><a href="https://en.wikipedia.org/wiki/Combination" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Combination</a></div></div></div><div id="InThisArticleColumn" class="column is-hidden-mobile"><nav class="menu sticky is-hidden"><p class="menu-label"><strong>In This Article</strong></p><ul id="InThisArticleMenu" class="menu-list"><li><a class="quickLink">Definition</a></li><li><a class="quickLink">Remarks</a></li><li><a class="quickLink">Example</a></li><li><a class="quickLink">Constructors</a></li><li><a class="quickLink">Properties</a></li><li><a class="quickLink">Methods</a></li><li><a class="quickLink">Bibliography</a></li><li><a class="quickLink">See Also</a><ul class="menu"><li><a class="quickLink">Reference</a></li><li><a class="quickLink">Other Resources</a></li></ul></li></ul></nav></div></div></div><footer id="PageFooter" class="footer border-top py-3 fixedFooter"><div class="columns"><div id="FooterContent" class="column"><p>Copyright (c) Giovanni Lafratta.</p> 
				</div></div></footer></div><script>$(function(){
SetDefaultLanguage("cs");
LoadTocFile(null, null);
InitializeQuickLinks();

$(".toggleSection" ).click(function () {
    SectionExpandCollapse(this);
});

$(".toggleSection").keypress(function () {
    SectionExpandCollapseCheckKey(this, event)
});
hljs.highlightAll();
});</script></body></html>